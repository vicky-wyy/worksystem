{% extends 'base/auth_base.html' %}

{% block style %}
<style>
    .grid {
        display: flex;
        justify-content: center;
        height: 100%;
        line-height: 100%;
    }

    .header {
        margin: 0px auto 30px auto;
        text-align: center;
    }

    .column {
        border-radius: 6px;
        background: #ffffff;
        width: 400px;
        max-width: 400px;
    }

    a {
        text-decoration: none;
        font-weight: bold;
        font-family: sans-serif;
        color: grey;
    }

    a:hover {
        color: red;
    }

    .container {
        text-align: center;
        color: #ffffff;
        font-weight: bold;
        font-family: sans-serif;
        font-size: 14px;
    }
</style>
{% endblock %}

{% block javascript %}
<script>
    $(document).ready(function () {
        $('.ui.form')
            .form({
                fields: {
                    password: {
                        identifier: 'password',
                        rules: [{
                            type: 'empty',
                            prompt: '密码不能为空'
                        }, {
                            type: 'minLength[6]',
                            prompt: '密码长度必须大于或等于6位'
                        }]
                    },
                    repassword: {
                        identifier: 'password2',
                        rules: [{
                            type: 'empty',
                            prompt: '请重复密码'
                        }, {
                            type: 'match[password]',
                            prompt: '您输入的重复密码和密码不一致'
                        }]
                    }
                }
            });
    });
</script>
{% endblock %}

{% block content %}
<div class="ui middle aligned grid">
    <div class="column">
        <h2 class="ui teal header">
            注册后台管理系统
        </h2>
        <form class="ui large form" method="POST">
            <div class="ui stacked segment">
                {{ form.csrf_token }}
                <div class="field">
                    <div class="ui left icon input">
                        <i class="mail icon"></i>
                        {{ form.itcode(placeholder="itcode地址",autocomplete="off")}}
                    </div>
                </div>
                <div class="field">
                    <div class="ui left icon input">
                        <i class="lock icon"></i>
                        {{ form.password(placeholder="密码",autocomplete="off")}}
                    </div>
                </div>
                <div class="field">
                    <div class="ui left icon input">
                        <i class="lock icon"></i>
                        {{ form.password2(placeholder="重复密码",autocomplete="off")}}
                    </div>
                </div>
                <div class="ui fluid large teal submit button">注册</div>
            </div>
            <div class="ui error message"></div>
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <div class="ui message">
                <i class="close icon"></i>
                <ul class="list">
                    {% for message in messages %}
                    <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            {% endwith %}
        </form>
        <div class="ui message">
            <div class="ui unstackable items">
                <div class="item">
                    <div class="content">
                        已有账号? <a href="{{ url_for('users.login') }}">点击回到登录页面!</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="ui center aligned container">
    <p>Powered by 测试开发组</p>
</div>
<div class="clear:both"></div>
{% endblock %}