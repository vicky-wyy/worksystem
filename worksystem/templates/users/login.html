{% extends 'base/auth_base.html' %}

{% block style %}
<style>
    .grid {
        display: flex;
        justify-content: center;
        height: 100%;
        line-height: 100%;
    }

    .header {
        margin: 0 auto 30px auto;
        text-align: center;
    }

    .column {
        border-radius: 6px;
        background: #ffffff;
        width: 400px;
        max-width: 400px;
    }

    a {
        text-decoration: none;
        font-weight: bold;
        font-family: sans-serif;
        color: grey;
    }

    a:hover {
        color: red;
    }

    .container {
        text-align: center;
        color: #ffffff;
        font-weight: bold;
        font-family: sans-serif;
        font-size: 14px;
    }
</style>
{% endblock %}

{% block javascript %}
<script>
    $(document).ready(function () {
        $('.ui.form').form({
            fields: {
                itcode:{
                    identifier:'itcode',
                    rules:[
                        {
                            type: 'empty',
                            prompt:'itcode不能为空'
                        }
                    ]
                },
                password: {
                    identifier: 'password',
                    rules: [
                        {
                            type: 'empty',
                            prompt: '密码不能为空'
                        },
                        {
                            type: 'minLength[6]',
                            prompt: '您的密码不得少于6位'
                        }
                    ]
                },
            }
        });
    });
</script>
{% endblock %}

{% block content %}
<div class="ui middle aligned grid">
    <div class="column">
        <h2 class="ui teal header">
            若依后台管理系统
        </h2>
        <form class="ui large form" method="POST">
            <div class="ui stacked segment">
                {{ form.csrf_token }}
                <div class="field">
                    <div class="ui left icon input">
                        <i class="user icon"></i>
                        {{ form.itcode(placeholder="请输入itcode地址",autocomplete="off")}}
                    </div>
                </div>
                <div class="field">
                    <div class="ui left icon input">
                        <i class="lock icon"></i>
                        {{ form.password(placeholder="请输入密码",autocomplete="off")}}
                    </div>
                </div>
                <div class="field">
                    <div class="ui toggle checkbox">
                        {{ form.remember_me}}{{form.remember_me.label}}
                    </div>
                </div>
                <div class="ui fluid large teal submit button">登录</div>
            </div>
            <div class="ui error message"></div>

            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <div class="ui message">
                <i class="close icon"></i>
                <ul class="list">
                    {% for message in messages %}
                    <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            {% endwith %}
        </form>
        <div class="ui message">
            <div class="ui unstackable items">
                <div class="item">
                    <div class="content">
                        新的用户? <a href="{{ url_for('users.register_request') }}">点击注册!</a>
                    </div>
                </div>
                <div class="item">
                    <div class="content">
                        忘记密码? <a href="{{ url_for('users.reset_password_request') }}">点击重置密码</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="ui center aligned container">
    <p>Powered by 测试开发组</p>
</div>
<div class="clear:both"></div>
{% endblock %}